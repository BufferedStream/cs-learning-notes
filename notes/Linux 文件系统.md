## Linux 文件系统

#### 1、七种文件类型

**普通文件类型**： 

linux 中最多的一种文件类型，包括纯文本文件（ASCII）；二进制文件（binary）；数据格式的文件（data）；各种压缩文件，第一个属性为[-]

**目录文件**

就是目录，能用 # cd 命令进入的。第一个属性为[d]，例如[drwxrwxrwx]

**块设备文件**

就是存储数据以供系统存取的接口设备，简单而言就是硬盘。例如一号硬盘的代码是 /dev/hda1 等文件。第一个属性为 [b]

**字符设备**

即串行端口的接口设备，例如键盘、鼠标等等。第一个属性为[c]

**套接字文件**

这类文件通常用在网络数据连接。可以启动一个程序来监听客户端的要求，客户端就可以通过套接字来进行数据通信。第一个属性为[s]，最常在 /var/run 目录中看到这种文件类型

**管道文件**

FIFO 也是一种特殊的文件类型，它主要的目的是，解决多个程序同时存取一个文件所造成的错误。 FIFO 是 first-in-firsr-out（先进先出）的缩写。第一个属性为[p]

**链接文件**

类似 Windows 下面的快捷方式。第一个属性为[l]，例如[lrwxrwxrwx]



#### 2、Linux 中文件扩展名

windows 里通过扩展名来区分文件类型的。 linux 里文件扩展名和文件类型没有关系。但为了容易区分和兼容用户使用 windows 的习惯，我们还是会用扩展名来表示文件类型。举例如下：

- .tar、.tar.gz、.tgz、.zip、.tar.bz 表示压缩文件，创建命令一般为 tar，gzip，zip 等。
- .sh 表示 shell 脚本文件，通过 shell 语言开发的程序。
- .pl 表示 perl 语言文件，通过 perl 语言开发的程序。
- .py 表示 python 语言文件，通过 python 语言开发的程序。
- .html、.htm、.php、.jsp、.do 表示网页语言的文件。
- .conf 表示系统服务的配置文件。
- .rpm 表示 rpm 安装包文件。
  



#### 3、文件属性

使用 ls -l 可以看到形如 `-rw-rw-r--  1 wasadmin wasgrp 15544320 17-09-27 16:00:37 nmon.tar.gz` 格式的文件，它的字段含义如下：



| 字 段             | 含义                                                         |
| ----------------- | ------------------------------------------------------------ |
| -rw-rw-r          | 对于文件的访问权限。第一个字符指明文件类型。在不同类型之间， 开头的“－”说明是一个普通文件，“d”表明是一个目录。其后三个字符是文件所有者的访问权限，再其后的三个字符是文件所属组中成员的访问权限，最后三个字符是其他所有人的访问权限。 rwx 分别代表 read 、write、 execute 权限。'-' 表示没有对应的权限。 |
| 1                 | 文件的硬链接数目。                                           |
| wasadmin          | 文件所有者的用户名。                                         |
| wasgrp            | 文件所属用户组的名字。                                       |
| 15544320          | 以字节数表示的文件大小。                                     |
| 17-09-27 16:00:37 | 上次修改文件的时间和日期。                                   |
| nmon.tar.gz       | 文件名。                                                     |



#### 4、文件系统树

类似于 Windows，一个 “类 Unix” 的操作系统，比如说 Linux，以分成目录结构来组织所有文件。这就意味着所有文件组成了一棵树型目录，这个目录树可能包含文件和其它的目录。文件系统中的第一级目录称为根目录。根目录包含文件和子目录，子目录包含更多的文件和子目录，以此类推。

类 Unix 系统不像 Windows，每个存储设备都有一个独立的文件系统。类 Unix 操作系统，比如 Linux，总是只有一个单一的文件系统树，不管有多少个磁盘或者存储设备连接到计算机上。根据负责维护系统安全的系统管理员的兴致，存储设备连接到（或者更精确些，是挂载到）目录树的各个节点上。

**挂载定义：**

1.Windows 下， mount 挂载，就是给磁盘分区提供一个盘符（C,D,E,...）。比如插入 U 盘后系统自动分配给了它 I:盘符其实就是挂载，退优盘的时候进行安全弹出，其实就是卸载 unmount。

2.Linux 下，不像 Windows 可以有 C,D,E 多个目录， Linux 只有一个根目录 /。在装系统时，我们分配给 linux 的所有区都在 / 下的某个位置，比如 /home 等等。

3.当我们插入了新硬盘，分了新磁盘区 sdb1（/dev目录下）。它现在还不属于/。

4.我们虽然可以在一些图形桌面系统里找到他的位置，浏览管理里面的文件，但在命令行却不知怎么访问它的目录，比如无法使用 cd 或者 ls。也无法在编程时指定一个目录对它操作。

5.这时我们使用了 mount /dev/sdb1 ~/Share/ ，把新硬盘的区 sdb1 挂载到工作目录的 ~/Share/ 文件夹下，之后访问这个 ~/Share/ 文件夹就相当于访问这个硬盘 2 的 sdb1 分区了。对 /Share/ 的任何操作，都相当于对 sdb1 里文件的操作。

6.所以 Linux 下， mount 挂载的作用，就是将一个设备（通常是存储设备）挂接到一个已存在的目录上。访问这个目录就是访问该存储设备。

7.linux 操作系统将所有的设备都看作文件，它将整个计算机的资源都整合成一个大的文件目录。我们要访问存储设备中的文件，必须将文件所在的分区挂载到一个已存在的目录上，然后通过访问这个目录来访问存储设备。挂载就是把设备放在一个目录下，让系统知道怎么管理这个设备里的文件，了解这个存储设备的可读写特性之类的过程。

8.我们不是有 /dev/sdb1 吗，直接对它操作不就行了？这不是它的目录吗？

9.这不是它的目录。虽然 /dev 是个目录，但 /dev/sdb1 不是目录。可以发现 ls/dev/sdb1 无法执行。 /dev/sdb1 ，是一个类似指针的东西，指向这个分区的原始数据块。 mount 前，系统并不知道这个数据块哪部分数据代表文件，如何对它们操作。

10.插入 CD，系统其实自动执行了 mount /dev/cdrom /media/cdrom。所以可以直接在 /media/cdrom 中对 CD 中的内容进行管理。



#### 5、Linux 系统目录



| 目录           | 功能                                                         |
| -------------- | ------------------------------------------------------------ |
| /              | 根目录，万物起源。                                           |
| /bin           | 包含系统启动和运行所必需的二进制程序。                       |
| /boot          | 包含 Linux 内核，最初的 RMA 磁盘映像（系统启动时，驱动程序所需）和启动加载程序。有趣的文件： /boot/grub/grub.conf or menu.lst，被用来配置启动加载程序。 /boot/vmlinuz， Linux 内核。 |
| /dev           | 这是一个包含设备节点的特殊目录。“一切都是文件”，也适用于设备。在这个目录里，内核维护着它支持的设备。 |
| /etc           | etc 不是什么缩写，是 and so on的意思，来源于法语的 et cetera 翻译成中文就是等等 的意思。至于为什么在 /etc 下面存放配置文件，按照原始的 UNIX 的说法(linux 文件结构参考 UNIX 的教学实现 MINIX) 这下面放的都是一堆零零碎碎的东西，就叫 etc，这其实是个历史遗留。这个目录包含所有系统层面的配置文件。它也包含一系列的 shell 脚本，在系统启动时，这些脚本会运行每个系统服务。这个目录中的任何文件应该是可读的文本文件。有趣的文件：虽然 /etc 目录中的任何文件都有去，但这里只列出了一些我一直喜欢的文件： /etc/crontab，定义自动运行的任务。 /etc/fstab，包含存储设备的列表，以及与他们相关的挂载点。 /etc/passwd，包含用户账号列表。 /etc/shadow 存储加密后的密码。 |
| /home          | 在通常的配置环境下，系统会在 /home 下，给每个用户分配一个目录。普通用户只能在他们自己的目录下创建文件。这个限制保护系统免受错误的用户活动破坏。 |
| /lib           | 包含核心系统程序所需的库文件。这些文件与 Windows 中的动态链接库相似。 |
| /los+found     | 每个使用 Linux 文件系统的格式化分区或设备，例如 ext3 文件系统，都会有这个目录。当部分恢复一个损坏的文件系统时，会用到这个目录。除非文件系统真正的损坏了，那么这个目录会是个空目录。 |
| /media         | 在现有的 Linux 系统中， /media 目录会包含可移除媒体设备的挂载点，例如 USB 驱动器， CD-ROMs 等等。这些设备连接到计算机之后，会自动地挂载到这个目录节点下。 |
| /mnt           | 在早些的 Linux 系统中， /mnt 目录包含可移除设备地挂载点。    |
| /opt           | 这个 /opt 目录被用来安装 “可选的” 软件。这个主要用来存储可能安装在系统中的商业软件产品。 |
| /proc          | 这个 /proc 目录很特殊。从存储在硬盘上的文件的意义上说，它不是真正的文件系统。反而，它是一个由 Linux 内核维护的虚拟文件系统。它所包含的文件是内核的窥视孔。这些文件是可读的，它们会告诉你内核是怎样监管计算机的。 |
| /root          | root 账户的主目录                                            |
| /sbin          | 这个目录包含 “系统” 二进制文件。它们是完成重大系统任务的程序，通常为超级用户保留。 |
| /tmp           | 这个 /tmp 目录，是用来存储由各种程序创建的临时文件的地方。一些配置，导致系统每次重新启动时，都会清空这个目录。 |
| /usr           | 在 Linux 系统中， /usr 目录可能是最大的一个。它包含普通用户所需要的所有程序和文件。 |
| /usr/bin       | /usr/bin 目录包含系统安装的可执行程序。通常，这个目录会包含许多程序。 |
| /usr/lib       | 包含由 /usr/bin 目录中的程序所用的共享库。                   |
| /usr/local     | 这个 /usr/local 目录，是非系统发行版自带，却打算让系统使用的程序的安装目录。通常，由源码编译的程序会安装在 /usr/local/bin 目录下。新安装的 Linux 系统中，会存在这个目录，但却是空目录，直到系统管理员放些东西到它里面。 |
| /usr/sbin      | 包含许多系统管理程序。                                       |
| /usr/share/doc | 大多数安装在系统中的软件包会包含一些文档。在 /usr/share/doc 目录下，我们可以找到按照软件包分类的文档。 |
| /var           | 除了 /tmp 和 /home 目录之外，相对来说，目前我们看到的目录是静态的，这是说，它们的内容不会改变。 /var 目录是可能需要改动的文件存储的地方。各种数据库，假脱机文件，用户邮件等等，都驻扎在这里。 |
| /var/log       | 这个 /var/log 目录包含日志文件，各种系统活动的记录。这些文件非常重要，并且应该时时监测它们。其中最重要的一个文件是 /var/log/messages。注意，为了系统安全，在一些系统中，你必须是超级用户才能查看这些日志文件。 |

